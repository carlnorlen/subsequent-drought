)
#Convert into a data frame
trees.combine.type <- as.data.frame(trees.combine.type)
#Full plot summaries by tree type
type.combine.sum <- trees.combine %>% group_by(COMMON_NAME, PLOT, drought, sequence) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
species <- type.combine.sum %>% group_by(COMMON_NAME, sequence, drought) %>% count() %>% filter((n >= 5 & sequence == 'Both Droughts' & drought == '1999-2002') |
(n >= 5 & sequence == '2012-2015 Only' & drought == '2012-2015')) %>%
group_by(COMMON_NAME) %>% summarize(count = n()) %>% filter (count > 1)
#Full plot summaries without tree type
plot.combine.sum <- trees.combine %>% group_by(PLOT, drought, sequence, Tree_Status) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
# Select a list of the plots by the sampling year
plots.combine.both <- trees.combine.group %>% dplyr::select(PLOT, drought, sequence)
#Adding in zero rows for Tree Types analysis
#Add the live white fire tree data by plot
type.combine.live.white.fir <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'white fir')
colnames(type.combine.live.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.white.fir <- left_join(plots.combine.both, type.combine.live.white.fir, by = c('PLOT', 'drought','sequence'))
# join.type.combine.live.white.fir
#Add the live sugar pine data by plot
type.combine.live.sugar <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'sugar pine')
colnames(type.combine.live.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.sugar <- left_join(plots.combine.both, type.combine.live.sugar, by = c('PLOT', 'drought','sequence'))
# join.type.second.live.other$Tree_Status <- 'Live'
#Add the live pinyon data by plot
type.combine.live.pinyon <- subset(treescombine.type, Tree_Status == 'Live' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.live.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.pinyon <- left_join(plots.combine.both, type.combine.live.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.live.ponderosa <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.live.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.ponderosa <- left_join(plots.combine.both, type.combine.live.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.live <- rbind(join.type.combine.live.white.fir, join.type.combine.live.pinyon, join.type.combine.live.sugar, join.type.combine.live.ponderosa)
type.combine.live <- dplyr::select(type.combine.live, -rmv)
#Add the data for the dead trees
#Add dead white fir data
type.combine.dead.white.fir <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'white fir')
colnames(type.combine.dead.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.white.fir <- left_join(plots.combine.both, type.combine.dead.white.fir, by = c('PLOT', 'drought','sequence'))
#Add the dead sugar pine data by plot
type.combine.dead.sugar <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'sugar pine')
colnames(type.combine.dead.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.sugar <- left_join(plots.combine.both, type.combine.dead.sugar, by = c('PLOT', 'drought','sequence'))
#Add the dead pinyon data by plot
type.combine.dead.pinyon <- subset(treescombine.type, Tree_Status == 'Dead' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.dead.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.pinyon <- left_join(plots.combine.both, type.combine.dead.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.dead.ponderosa <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.dead.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.ponderosa <- left_join(plots.combine.both, type.combine.dead.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.dead <- rbind(join.type.combine.dead.white.fir, join.type.combine.dead.pinyon, join.type.combine.dead.sugar, join.type.combine.dead.ponderosa)
type.combine.dead <- dplyr::select(type.combine.dead, -rmv)
#Add the live and dead data together
type.combine.join <- left_join(type.combine.sum, type.combine.live, by = c('PLOT', 'drought', 'sequence', 'tree_type'))
type.combine.all <- left_join(type.combine.join, type.combine.dead, by = c('PLOT', 'drought', 'sequence', 'tree_type'))
#Filling in live plot variables
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / type.combine.all$basal_area * 100
type.combine.all <- as.data.frame(type.combine.all)
head(type.combine.all)
#Summaries by tree types across plots
type.combine.summary <- type.combine.all %>% group_by(COMMON_NAME, sequence, drought) %>% summarize(
biomass.mean = mean(biomass),
biomass.sd = sd(biomass),
biomass.se = sd(biomass) / sqrt(length(biomass)),
count.mean = mean(count),
count.sd = sd(count),
count.se = sd(count) / sqrt(length(count)),
basal_area.mean = mean(basal_area),
basal_area.sd = sd(basal_area),
basal_area.se = sd(basal_area) / sqrt(length(basal_area.dead)),
basal_area.dead.mean = mean(basal_area.dead),
basal_area.dead.sd = sd(basal_area.dead),
basal_area.dead.se = sd(basal_area.dead) / sqrt(length(basal_area.dead)),
mortality.mean = mean(basal_area.mort),
mortality.sd = sd(basal_area.mort),
mortality.se = sd(basal_area.mort) / sqrt(length(basal_area.mort)),
sample.size = length(count)
)
#Make the summary by tree type a data frame
type.combine.summary <- as.data.frame(type.combine.summary)
trees.all$sequence <- 'Both Droughts'
trees.second$sequence <- '2012-2015 Only'
#Combine the tree data together
trees.combine <- rbind(trees.all, trees.second)
#Group data by plot and drought
trees.combine.group <- trees.combine %>% group_by(PLOT, drought, sequence) %>%
summarize(count.plot = sum(count),
biomass.plot = sum(live_biomass),
BasalArea.plot = sum(basal_area),
DIA.plot.mean = sum(DIA*count) / sum(count),
DIA.plot.stdDev = sqrt(sum((DIA - (sum(DIA*count)/sum(count)))^2 * count) / sum(count)))
#Convert into a data frame
trees.combine.group <- as.data.frame(trees.combine.group)
# Test <- trees.combine %>% group_by(COMMON_NAME) %>% select(SPCD, COMMON_NAME, DIA, Tree_Status)
#Summarize by species, PLOT, Tree_Status
trees.combine.type <- trees.combine %>% group_by(COMMON_NAME, PLOT, Tree_Status, drought, sequence) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
#Convert into a data frame
trees.combine.type <- as.data.frame(trees.combine.type)
#Full plot summaries by tree type
type.combine.sum <- trees.combine %>% group_by(COMMON_NAME, PLOT, drought, sequence) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
species <- type.combine.sum %>% group_by(COMMON_NAME, sequence, drought) %>% count() %>% filter((n >= 5 & sequence == 'Both Droughts' & drought == '1999-2002') |
(n >= 5 & sequence == '2012-2015 Only' & drought == '2012-2015')) %>%
group_by(COMMON_NAME) %>% summarize(count = n()) %>% filter (count > 1)
#Full plot summaries without tree type
plot.combine.sum <- trees.combine %>% group_by(PLOT, drought, sequence, Tree_Status) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
# Select a list of the plots by the sampling year
plots.combine.both <- trees.combine.group %>% dplyr::select(PLOT, drought, sequence)
#Adding in zero rows for Tree Types analysis
#Add the live white fire tree data by plot
type.combine.live.white.fir <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'white fir')
colnames(type.combine.live.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.white.fir <- left_join(plots.combine.both, type.combine.live.white.fir, by = c('PLOT', 'drought','sequence'))
# join.type.combine.live.white.fir
#Add the live sugar pine data by plot
type.combine.live.sugar <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'sugar pine')
colnames(type.combine.live.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.sugar <- left_join(plots.combine.both, type.combine.live.sugar, by = c('PLOT', 'drought','sequence'))
# join.type.second.live.other$Tree_Status <- 'Live'
#Add the live pinyon data by plot
type.combine.live.pinyon <- subset(treescombine.type, Tree_Status == 'Live' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.live.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.pinyon <- left_join(plots.combine.both, type.combine.live.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.live.ponderosa <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.live.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.ponderosa <- left_join(plots.combine.both, type.combine.live.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.live <- rbind(join.type.combine.live.white.fir, join.type.combine.live.pinyon, join.type.combine.live.sugar, join.type.combine.live.ponderosa)
type.combine.live <- dplyr::select(type.combine.live, -rmv)
#Add the data for the dead trees
#Add dead white fir data
type.combine.dead.white.fir <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'white fir')
colnames(type.combine.dead.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.white.fir <- left_join(plots.combine.both, type.combine.dead.white.fir, by = c('PLOT', 'drought','sequence'))
#Add the dead sugar pine data by plot
type.combine.dead.sugar <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'sugar pine')
colnames(type.combine.dead.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.sugar <- left_join(plots.combine.both, type.combine.dead.sugar, by = c('PLOT', 'drought','sequence'))
#Add the dead pinyon data by plot
type.combine.dead.pinyon <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.dead.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.pinyon <- left_join(plots.combine.both, type.combine.dead.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.dead.ponderosa <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.dead.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.ponderosa <- left_join(plots.combine.both, type.combine.dead.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.dead <- rbind(join.type.combine.dead.white.fir, join.type.combine.dead.pinyon, join.type.combine.dead.sugar, join.type.combine.dead.ponderosa)
type.combine.dead <- dplyr::select(type.combine.dead, -rmv)
#Add the live and dead data together
type.combine.join <- left_join(type.combine.sum, type.combine.live, by = c('PLOT', 'drought', 'sequence', 'tree_type'))
type.combine.all <- left_join(type.combine.join, type.combine.dead, by = c('PLOT', 'drought', 'sequence', 'tree_type'))
#Filling in live plot variables
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / type.combine.all$basal_area * 100
type.combine.all <- as.data.frame(type.combine.all)
head(type.combine.all)
#Summaries by tree types across plots
type.combine.summary <- type.combine.all %>% group_by(COMMON_NAME, sequence, drought) %>% summarize(
biomass.mean = mean(biomass),
biomass.sd = sd(biomass),
biomass.se = sd(biomass) / sqrt(length(biomass)),
count.mean = mean(count),
count.sd = sd(count),
count.se = sd(count) / sqrt(length(count)),
basal_area.mean = mean(basal_area),
basal_area.sd = sd(basal_area),
basal_area.se = sd(basal_area) / sqrt(length(basal_area.dead)),
basal_area.dead.mean = mean(basal_area.dead),
basal_area.dead.sd = sd(basal_area.dead),
basal_area.dead.se = sd(basal_area.dead) / sqrt(length(basal_area.dead)),
mortality.mean = mean(basal_area.mort),
mortality.sd = sd(basal_area.mort),
mortality.se = sd(basal_area.mort) / sqrt(length(basal_area.mort)),
sample.size = length(count)
)
#Make the summary by tree type a data frame
type.combine.summary <- as.data.frame(type.combine.summary)
trees.all$sequence <- 'Both Droughts'
trees.second$sequence <- '2012-2015 Only'
#Combine the tree data together
trees.combine <- rbind(trees.all, trees.second)
#Group data by plot and drought
trees.combine.group <- trees.combine %>% group_by(PLOT, drought, sequence) %>%
summarize(count.plot = sum(count),
biomass.plot = sum(live_biomass),
BasalArea.plot = sum(basal_area),
DIA.plot.mean = sum(DIA*count) / sum(count),
DIA.plot.stdDev = sqrt(sum((DIA - (sum(DIA*count)/sum(count)))^2 * count) / sum(count)))
#Convert into a data frame
trees.combine.group <- as.data.frame(trees.combine.group)
# Test <- trees.combine %>% group_by(COMMON_NAME) %>% select(SPCD, COMMON_NAME, DIA, Tree_Status)
#Summarize by species, PLOT, Tree_Status
trees.combine.type <- trees.combine %>% group_by(COMMON_NAME, PLOT, Tree_Status, drought, sequence) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
#Convert into a data frame
trees.combine.type <- as.data.frame(trees.combine.type)
#Full plot summaries by tree type
type.combine.sum <- trees.combine %>% group_by(COMMON_NAME, PLOT, drought, sequence) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
species <- type.combine.sum %>% group_by(COMMON_NAME, sequence, drought) %>% count() %>% filter((n >= 5 & sequence == 'Both Droughts' & drought == '1999-2002') |
(n >= 5 & sequence == '2012-2015 Only' & drought == '2012-2015')) %>%
group_by(COMMON_NAME) %>% summarize(count = n()) %>% filter (count > 1)
#Full plot summaries without tree type
plot.combine.sum <- trees.combine %>% group_by(PLOT, drought, sequence, Tree_Status) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
# Select a list of the plots by the sampling year
plots.combine.both <- trees.combine.group %>% dplyr::select(PLOT, drought, sequence)
#Adding in zero rows for Tree Types analysis
#Add the live white fire tree data by plot
type.combine.live.white.fir <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'white fir')
colnames(type.combine.live.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.white.fir <- left_join(plots.combine.both, type.combine.live.white.fir, by = c('PLOT', 'drought','sequence'))
# join.type.combine.live.white.fir
#Add the live sugar pine data by plot
type.combine.live.sugar <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'sugar pine')
colnames(type.combine.live.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.sugar <- left_join(plots.combine.both, type.combine.live.sugar, by = c('PLOT', 'drought','sequence'))
# join.type.second.live.other$Tree_Status <- 'Live'
#Add the live pinyon data by plot
type.combine.live.pinyon <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.live.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.pinyon <- left_join(plots.combine.both, type.combine.live.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.live.ponderosa <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.live.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.ponderosa <- left_join(plots.combine.both, type.combine.live.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.live <- rbind(join.type.combine.live.white.fir, join.type.combine.live.pinyon, join.type.combine.live.sugar, join.type.combine.live.ponderosa)
type.combine.live <- dplyr::select(type.combine.live, -rmv)
#Add the data for the dead trees
#Add dead white fir data
type.combine.dead.white.fir <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'white fir')
colnames(type.combine.dead.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.white.fir <- left_join(plots.combine.both, type.combine.dead.white.fir, by = c('PLOT', 'drought','sequence'))
#Add the dead sugar pine data by plot
type.combine.dead.sugar <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'sugar pine')
colnames(type.combine.dead.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.sugar <- left_join(plots.combine.both, type.combine.dead.sugar, by = c('PLOT', 'drought','sequence'))
#Add the dead pinyon data by plot
type.combine.dead.pinyon <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.dead.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.pinyon <- left_join(plots.combine.both, type.combine.dead.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.dead.ponderosa <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.dead.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.ponderosa <- left_join(plots.combine.both, type.combine.dead.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.dead <- rbind(join.type.combine.dead.white.fir, join.type.combine.dead.pinyon, join.type.combine.dead.sugar, join.type.combine.dead.ponderosa)
type.combine.dead <- dplyr::select(type.combine.dead, -rmv)
#Add the live and dead data together
type.combine.join <- left_join(type.combine.sum, type.combine.live, by = c('PLOT', 'drought', 'sequence', 'tree_type'))
type.combine.all <- left_join(type.combine.join, type.combine.dead, by = c('PLOT', 'drought', 'sequence', 'tree_type'))
#Filling in live plot variables
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / type.combine.all$basal_area * 100
type.combine.all <- as.data.frame(type.combine.all)
head(type.combine.all)
#Summaries by tree types across plots
type.combine.summary <- type.combine.all %>% group_by(COMMON_NAME, sequence, drought) %>% summarize(
biomass.mean = mean(biomass),
biomass.sd = sd(biomass),
biomass.se = sd(biomass) / sqrt(length(biomass)),
count.mean = mean(count),
count.sd = sd(count),
count.se = sd(count) / sqrt(length(count)),
basal_area.mean = mean(basal_area),
basal_area.sd = sd(basal_area),
basal_area.se = sd(basal_area) / sqrt(length(basal_area.dead)),
basal_area.dead.mean = mean(basal_area.dead),
basal_area.dead.sd = sd(basal_area.dead),
basal_area.dead.se = sd(basal_area.dead) / sqrt(length(basal_area.dead)),
mortality.mean = mean(basal_area.mort),
mortality.sd = sd(basal_area.mort),
mortality.se = sd(basal_area.mort) / sqrt(length(basal_area.mort)),
sample.size = length(count)
)
#Make the summary by tree type a data frame
type.combine.summary <- as.data.frame(type.combine.summary)
type.combine.join <- left_join(type.combine.sum, type.combine.live, by = c('PLOT', 'drought', 'sequence', 'COMMON_NAME'))
type.combine.all <- left_join(type.combine.join, type.combine.dead, by = c('PLOT', 'drought', 'sequence', 'COMMON_NAME'))
#Filling in live plot variables
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / type.combine.all$basal_area * 100
type.combine.all <- as.data.frame(type.combine.all)
head(type.combine.all)
#Summaries by tree types across plots
type.combine.summary <- type.combine.all %>% group_by(COMMON_NAME, sequence, drought) %>% summarize(
biomass.mean = mean(biomass),
biomass.sd = sd(biomass),
biomass.se = sd(biomass) / sqrt(length(biomass)),
count.mean = mean(count),
count.sd = sd(count),
count.se = sd(count) / sqrt(length(count)),
basal_area.mean = mean(basal_area),
basal_area.sd = sd(basal_area),
basal_area.se = sd(basal_area) / sqrt(length(basal_area.dead)),
basal_area.dead.mean = mean(basal_area.dead),
basal_area.dead.sd = sd(basal_area.dead),
basal_area.dead.se = sd(basal_area.dead) / sqrt(length(basal_area.dead)),
mortality.mean = mean(basal_area.mort),
mortality.sd = sd(basal_area.mort),
mortality.se = sd(basal_area.mort) / sqrt(length(basal_area.mort)),
sample.size = length(count)
)
#Make the summary by tree type a data frame
type.combine.summary <- as.data.frame(type.combine.summary)
type.combine.all
join.type.combine.dead.ponderosa
type.combine.dead <- rbind(join.type.combine.dead.white.fir, join.type.combine.dead.pinyon, join.type.combine.dead.sugar, join.type.combine.dead.ponderosa)
type.combine.dead #<- dplyr::select(type.combine.dead, -rmv)
type.combine.dead <- dplyr::select(type.combine.dead, -rmv)
type.combine.dead
type.combine.live
type.combine.dead
type.combine.sum
type.combine.sum <- trees.combine %>% group_by(PLOT, drought, sequence, COMMON_NAME) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
type.combine.sum <- as.data.frame(type.combine.sum)
plots.combine.both
type.combine.sum
#Add the live and dead data together
# type.combine.join <- left_join(type.combine.sum, type.combine.live, by = c('PLOT', 'drought', 'sequence', 'COMMON_NAME'))
type.combine.all <- left_join(type.combine.live, type.combine.dead, by = c('PLOT', 'drought', 'sequence', 'COMMON_NAME'))
type.combine.all
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / type.combine.all$basal_area * 100
type.combine.all <- as.data.frame(type.combine.all)
head(type.combine.all)
#Summaries by tree types across plots
type.combine.summary <- type.combine.all %>% group_by(COMMON_NAME, sequence, drought) %>% summarize(
biomass.mean = mean(biomass),
biomass.sd = sd(biomass),
biomass.se = sd(biomass) / sqrt(length(biomass)),
count.mean = mean(count),
count.sd = sd(count),
count.se = sd(count) / sqrt(length(count)),
basal_area.mean = mean(basal_area),
basal_area.sd = sd(basal_area),
basal_area.se = sd(basal_area) / sqrt(length(basal_area.dead)),
basal_area.dead.mean = mean(basal_area.dead),
basal_area.dead.sd = sd(basal_area.dead),
basal_area.dead.se = sd(basal_area.dead) / sqrt(length(basal_area.dead)),
mortality.mean = mean(basal_area.mort),
mortality.sd = sd(basal_area.mort),
mortality.se = sd(basal_area.mort) / sqrt(length(basal_area.mort)),
sample.size = length(count)
)
#Make the summary by tree type a data frame
type.combine.summary <- as.data.frame(type.combine.summary)
head(type.combine.all)
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / (type.combine.all$basal_area.live + type.combine.all$basal_area.dead) * 100
type.combine.all <- as.data.frame(type.combine.all)
type.combine.all
type.combine.sum <- trees.combine %>% group_by(PLOT, drought, sequence, COMMON_NAME) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
type.combine.sum <- as.data.frame(type.combine.sum)
type.combine.sum
type.combine.sum <- trees.combine %>% filter('COMMON_NAME' == 'white fir' | 'COMMON_NAME' == 'sugar pine' | 'COMMON_NAME' == 'singleleaf pinyon' | 'COMMON_NAME' == 'ponderosa pine') %>%
group_by(PLOT, drought, sequence, COMMON_NAME) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
type.combine.sum <- as.data.frame(type.combine.sum)
type.combine.sum
species <- type.combine.sum %>% group_by(COMMON_NAME, sequence, drought) %>% count() %>% filter((n >= 5 & sequence == 'Both Droughts' & drought == '1999-2002') |
(n >= 5 & sequence == '2012-2015 Only' & drought == '2012-2015')) %>%
group_by(COMMON_NAME) %>% summarize(count = n()) %>% filter (count > 1)
#Full plot summaries without tree type
plot.combine.sum <- trees.combine %>% group_by(PLOT, drought, sequence, Tree_Status) %>% summarize(
biomass = sum(live_biomass),
count = sum(count),
basal_area = sum(basal_area)
)
# Select a list of the plots by the sampling year
plots.combine.both <- trees.combine.group %>% dplyr::select(PLOT, drought, sequence)
#Adding in zero rows for Tree Types analysis
#Add the live white fire tree data by plot
type.combine.live.white.fir <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'white fir')
colnames(type.combine.live.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.white.fir <- left_join(plots.combine.both, type.combine.live.white.fir, by = c('PLOT', 'drought','sequence'))
# join.type.combine.live.white.fir
#Add the live sugar pine data by plot
type.combine.live.sugar <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'sugar pine')
colnames(type.combine.live.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.sugar <- left_join(plots.combine.both, type.combine.live.sugar, by = c('PLOT', 'drought','sequence'))
# join.type.second.live.other$Tree_Status <- 'Live'
#Add the live pinyon data by plot
type.combine.live.pinyon <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.live.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.pinyon <- left_join(plots.combine.both, type.combine.live.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.live.ponderosa <- subset(trees.combine.type, Tree_Status == 'Live' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.live.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.live", "count.live", "basal_area.live")
join.type.combine.live.ponderosa <- left_join(plots.combine.both, type.combine.live.ponderosa, by = c('PLOT', 'drought','sequence'))
#Combine different data sets
type.combine.live <- rbind(join.type.combine.live.white.fir, join.type.combine.live.pinyon, join.type.combine.live.sugar, join.type.combine.live.ponderosa)
type.combine.live <- dplyr::select(type.combine.live, -rmv)
#Add the data for the dead trees
#Add dead white fir data
type.combine.dead.white.fir <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'white fir')
colnames(type.combine.dead.white.fir) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.white.fir <- left_join(plots.combine.both, type.combine.dead.white.fir, by = c('PLOT', 'drought','sequence'))
#Add the dead sugar pine data by plot
type.combine.dead.sugar <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'sugar pine')
colnames(type.combine.dead.sugar) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.sugar <- left_join(plots.combine.both, type.combine.dead.sugar, by = c('PLOT', 'drought','sequence'))
#Add the dead pinyon data by plot
type.combine.dead.pinyon <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'singleleaf pinyon')
colnames(type.combine.dead.pinyon) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.pinyon <- left_join(plots.combine.both, type.combine.dead.pinyon, by = c('PLOT', 'drought','sequence'))
#Add the live ponderosa pine data by plot
type.combine.dead.ponderosa <- subset(trees.combine.type, Tree_Status == 'Dead' & COMMON_NAME == 'ponderosa pine')
colnames(type.combine.dead.ponderosa) <- c("COMMON_NAME", "PLOT", "Tree_Status", "drought", "sequence", "biomass.dead", "count.dead", "basal_area.dead")
join.type.combine.dead.ponderosa <- left_join(plots.combine.both, type.combine.dead.ponderosa, by = c('PLOT', 'drought','sequence'))
join.type.combine.dead.ponderosa
#Combine different data sets
type.combine.dead <- rbind(join.type.combine.dead.white.fir, join.type.combine.dead.pinyon, join.type.combine.dead.sugar, join.type.combine.dead.ponderosa)
type.combine.dead <- dplyr::select(type.combine.dead, -rmv)
type.combine.dead
type.combine.live
type.combine.sum
plots.combine.both
type.combine.sum
type.combine.join <- left_join(type.combine.sum, type.combine.live, by = c('PLOT', 'drought', 'sequence', 'COMMON_NAME'))
type.combine.all <- left_join(type.combine.join, type.combine.dead, by = c('PLOT', 'drought', 'sequence', 'COMMON_NAME'))
type.combine.all$count.live[is.na(type.combine.all$count.live)] <- 0
type.combine.all$biomass.live[is.na(type.combine.all$biomass.live)] <- 0
type.combine.all$basal_area.live[is.na(type.combine.all$basal_area.live)] <- 0
#Filling in dead plot variables
type.combine.all$count.dead[is.na(type.combine.all$count.dead)] <- 0
type.combine.all$biomass.dead[is.na(type.combine.all$biomass.dead)] <- 0
type.combine.all$basal_area.dead[is.na(type.combine.all$basal_area.dead)] <- 0
type.combine.all$basal_area.mort <- type.combine.all$basal_area.dead / (type.combine.all$basal_area.live + type.combine.all$basal_area.dead) * 100
type.combine.all <- as.data.frame(type.combine.all)
type.combine.all
